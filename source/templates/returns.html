{% extends "base.html" %}

{% block content %}
<h2>Create Return Request</h2>

{% if not sellers %}
<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px; margin: 20px 0;">
    <strong>No sellers found!</strong> Please initialize the database first.
</div>
{% else %}
<form method="POST" action="/returns">
    <p>
        <label>Seller:</label>
        <select name="seller_name" required>
            <option value="">Select Seller</option>
            {% for seller in sellers %}
            <option value="{{ seller.name }}">{{ seller.name }}</option>
            {% endfor %}
        </select>
    </p>

    <p>
        <label>Customer Name:</label>
        <input type="text" name="customer_name" placeholder="Enter customer name" required>
    </p>

    <p>
        <label>Customer Surname:</label>
        <input type="text" name="customer_surname" placeholder="Enter customer surname" required>
    </p>

    <p>
        <label>Purchase Date:</label>
        <input type="date" name="purchase_date" required>
    </p>

    <p>
        <label>Product Name:</label>
        <input type="text" name="product_name" placeholder="Enter product name" required>
    </p>

    <p>
        <label>Return Reason:</label><br>
        <textarea name="reason" rows="4" cols="50" placeholder="Describe the reason for return" required></textarea>
    </p>

    <button type="submit">Create Return Request</button>
</form>
{% endif %}

<h2>All Return Requests</h2>
{% if returns %}
<table>
    <tr>
        <th>ID</th>
        <th>Seller</th>
        <th>Customer</th>
        <th>Purchase Date</th>
        <th>Product</th>
        <th>Reason</th>
        <th>Status</th>
    </tr>
    {% for return in returns %}
    <tr>
        <td>{{ return.id }}</td>
        <td>{{ return.seller_name }}</td>
        <td>{{ return.customer_name }} {{ return.customer_surname }}</td>
        <td>{{ return.purchase_date }}</td>
        <td>{{ return.product_name }}</td>
        <td>{{ return.reason }}</td>
        <td>{{ return.status }}</td>
    </tr>
    {% endfor %}
</table>
{% else %}
<p>No return requests yet.</p>
{% endif %}
{% endblock %}